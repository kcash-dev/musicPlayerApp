{"version":3,"sources":["useOnProgressChange.ts"],"names":["useOnProgressChange","opts","offsetX","data","size","onProgressChange","value","_value","length","DATA_LENGTH","SINGLE_ITEM","DOUBLE_ITEM","absoluteProgress","Math","abs"],"mappings":";;;;;;;AAAA;;AAIA;;AAGO,SAASA,mBAAT,CACHC,IADG,EAKL;AACE,QAAM;AAAEC,IAAAA,OAAF;AAAWC,IAAAA,IAAX;AAAiBC,IAAAA,IAAjB;AAAuBC,IAAAA;AAAvB,MAA4CJ,IAAlD;AACA,kDACI,MAAMC,OAAO,CAACI,KADlB,EAEKC,MAAD,IAAY;AACR,QAAID,KAAK,GAAGC,MAAZ;;AAEA,QAAIJ,IAAI,CAACK,MAAL,KAAgBC,uBAAYC,WAAhC,EAA6C;AACzCJ,MAAAA,KAAK,GAAGA,KAAK,GAAGF,IAAhB;AACH;;AAED,QAAID,IAAI,CAACK,MAAL,KAAgBC,uBAAYE,WAAhC,EAA6C;AACzCL,MAAAA,KAAK,GAAGA,KAAK,IAAIF,IAAI,GAAG,CAAX,CAAb;AACH;;AAED,QAAIQ,gBAAgB,GAAGC,IAAI,CAACC,GAAL,CAASR,KAAK,GAAGF,IAAjB,CAAvB;;AAEA,QAAIE,KAAK,GAAG,CAAZ,EAAe;AACXM,MAAAA,gBAAgB,GAAGT,IAAI,CAACK,MAAL,GAAcI,gBAAjC;AACH;;AAED,KAAC,CAACP,gBAAF,IACI,oCAAQA,gBAAR,EAA0BC,KAA1B,EAAiCM,gBAAjC,CADJ;AAEH,GArBL,EAsBI,CAACP,gBAAD,EAAmBF,IAAnB,CAtBJ;AAwBH","sourcesContent":["import Animated, {\n    runOnJS,\n    useAnimatedReaction,\n} from 'react-native-reanimated';\nimport { DATA_LENGTH } from '../constants';\nimport type { TCarouselProps } from '../types';\n\nexport function useOnProgressChange(\n    opts: {\n        size: number;\n        offsetX: Animated.SharedValue<number>;\n    } & Pick<TCarouselProps, 'data' | 'onProgressChange'>\n) {\n    const { offsetX, data, size, onProgressChange } = opts;\n    useAnimatedReaction(\n        () => offsetX.value,\n        (_value) => {\n            let value = _value;\n\n            if (data.length === DATA_LENGTH.SINGLE_ITEM) {\n                value = value % size;\n            }\n\n            if (data.length === DATA_LENGTH.DOUBLE_ITEM) {\n                value = value % (size * 2);\n            }\n\n            let absoluteProgress = Math.abs(value / size);\n\n            if (value > 0) {\n                absoluteProgress = data.length - absoluteProgress;\n            }\n\n            !!onProgressChange &&\n                runOnJS(onProgressChange)(value, absoluteProgress);\n        },\n        [onProgressChange, data]\n    );\n}\n"]}